/*
 * Basic jQuery Slider plug-in v.1.3
 *
 * http://www.basic-slider.com
 *
 * Authored by John Cobb
 * http://www.johncobb.name
 * @john0514
 *
 * Copyright 2011, John Cobb
 * License: GNU General Public License, version 3 (GPL-3.0)
 * http://www.opensource.org/licenses/gpl-3.0.html
 *
 */!function(e){"use strict";e.fn.bjqs=function(t){var i={width:700,height:300,animtype:"fade",animduration:450,animspeed:4e3,automatic:!0,showcontrols:!0,centercontrols:!0,nexttext:"Next",prevtext:"Prev",showmarkers:!0,centermarkers:!0,keyboardnav:!0,hoverpause:!0,usecaptions:!0,randomstart:!1,responsive:!1},n=e.extend({},i,t),d=this,h=d.find("ul.bjqs"),s=h.children("li"),a=null,r=null,c=null,l=null,o=null,u=null,w=null,g=null,f={slidecount:s.length,animating:!1,paused:!1,currentslide:1,nextslide:0,currentindex:0,nextindex:0,interval:null},p={width:null,height:null,ratio:null},m={fwd:"forward",prev:"previous"},v=function(){s.addClass("bjqs-slide"),n.responsive?x():k(),f.slidecount>1?(n.randomstart&&D(),n.showcontrols&&T(),n.showmarkers&&b(),n.keyboardnav&&j(),n.hoverpause&&n.automatic&&C(),"slide"===n.animtype&&y()):n.automatic=!1,n.usecaptions&&I(),"slide"!==n.animtype||n.randomstart||(f.currentindex=1,f.currentslide=2),h.show(),s.eq(f.currentindex).show(),n.automatic&&(f.interval=setInterval(function(){z(m.fwd,!1)},n.animspeed))},x=function(){p.width=d.outerWidth(),p.ratio=p.width/n.width,p.height=n.height*p.ratio,"fade"===n.animtype&&(s.css({height:n.height,width:"100%"}),s.find("img").css({height:n.height,width:"100%"}),h.css({height:n.height,width:"100%"}),d.css({height:n.height,"max-width":n.width,position:"relative"}),p.width<n.width&&(s.css({height:p.height}),s.find("img").css({height:p.height}),h.css({height:p.height}),d.css({height:p.height})),e(window).resize(function(){p.width=d.outerWidth(),p.ratio=p.width/n.width,p.height=n.height*p.ratio,s.css({height:p.height}),s.find("img").css({height:p.height}),h.css({height:p.height}),d.css({height:p.height})})),"slide"===n.animtype&&(s.css({height:n.height,width:n.width}),s.find("img").css({height:n.height,width:n.width}),h.css({height:n.height,width:n.width*n.slidecount}),d.css({height:n.height,"max-width":n.width,position:"relative"}),p.width<n.width&&(s.css({height:p.height}),s.find("img").css({height:p.height}),h.css({height:p.height}),d.css({height:p.height})),e(window).resize(function(){p.width=d.outerWidth(),p.ratio=p.width/n.width,p.height=n.height*p.ratio,s.css({height:p.height,width:p.width}),s.find("img").css({height:p.height,width:p.width}),h.css({height:p.height,width:p.width*n.slidecount}),d.css({height:p.height}),u.css({height:p.height,width:p.width}),q(function(){z(!1,f.currentslide)},200,"some unique string")}))},q=function(){var e={};return function(t,i,n){n||(n="Don't call this twice without a uniqueId"),e[n]&&clearTimeout(e[n]),e[n]=setTimeout(t,i)}}(),k=function(){s.css({height:n.height,width:n.width}),h.css({height:n.height,width:n.width}),d.css({height:n.height,width:n.width,position:"relative"})},y=function(){w=s.eq(0).clone(),g=s.eq(f.slidecount-1).clone(),w.attr({"data-clone":"last","data-slide":0}).appendTo(h).show(),g.attr({"data-clone":"first","data-slide":0}).prependTo(h).show(),s=h.children("li"),f.slidecount=s.length,u=e('<div class="bjqs-wrapper"></div>'),n.responsive&&p.width<n.width?(u.css({width:p.width,height:p.height,overflow:"hidden",position:"relative"}),h.css({width:p.width*(f.slidecount+2),left:-p.width*f.currentslide})):(u.css({width:n.width,height:n.height,overflow:"hidden",position:"relative"}),h.css({width:n.width*(f.slidecount+2),left:-n.width*f.currentslide})),s.css({"float":"left",position:"relative",display:"list-item"}),u.prependTo(d),h.appendTo(u)},T=function(){if(a=e('<ul class="bjqs-controls"></ul>'),r=e('<li class="bjqs-next"><a href="#" data-direction="'+m.fwd+'">'+n.nexttext+"</a></li>"),c=e('<li class="bjqs-prev"><a href="#" data-direction="'+m.prev+'">'+n.prevtext+"</a></li>"),a.on("click","a",function(t){t.preventDefault();var i=e(this).attr("data-direction");f.animating||(i===m.fwd&&z(m.fwd,!1),i===m.prev&&z(m.prev,!1))}),c.appendTo(a),r.appendTo(a),a.appendTo(d),n.centercontrols){a.addClass("v-centered");var t=(d.height()-r.children("a").outerHeight())/2,i=t/n.height*100,h=i+"%";r.find("a").css("top",h),c.find("a").css("top",h)}},b=function(){if(l=e('<ol class="bjqs-markers"></ol>'),e.each(s,function(t){var i=t+1,d=t+1;"slide"===n.animtype&&(d=t+2);var h=e('<li><a href="#">'+i+"</a></li>");i===f.currentslide&&h.addClass("active-marker"),h.on("click","a",function(e){e.preventDefault(),f.animating||f.currentslide===d||z(!1,d)}),h.appendTo(l)}),l.appendTo(d),o=l.find("li"),n.centermarkers){l.addClass("h-centered");var t=(n.width-l.width())/2;l.css("left",t)}},j=function(){e(document).keyup(function(e){f.paused||(clearInterval(f.interval),f.paused=!0),f.animating||(39===e.keyCode?(e.preventDefault(),z(m.fwd,!1)):37===e.keyCode&&(e.preventDefault(),z(m.prev,!1))),f.paused&&n.automatic&&(f.interval=setInterval(function(){z(m.fwd)},n.animspeed),f.paused=!1)})},C=function(){d.hover(function(){f.paused||(clearInterval(f.interval),f.paused=!0)},function(){f.paused&&(f.interval=setInterval(function(){z(m.fwd,!1)},n.animspeed),f.paused=!1)})},I=function(){e.each(s,function(t,i){var n=e(i).children("img:first-child").attr("title");n||(n=e(i).children("a").find("img:first-child").attr("title")),n&&(n=e('<p class="bjqs-caption">'+n+"</p>"),n.appendTo(e(i)))})},D=function(){var e=Math.floor(Math.random()*f.slidecount)+1;f.currentslide=e,f.currentindex=e-1},W=function(e){e===m.fwd?s.eq(f.currentindex).next().length?(f.nextindex=f.currentindex+1,f.nextslide=f.currentslide+1):(f.nextindex=0,f.nextslide=1):s.eq(f.currentindex).prev().length?(f.nextindex=f.currentindex-1,f.nextslide=f.currentslide-1):(f.nextindex=f.slidecount-1,f.nextslide=f.slidecount)},z=function(e,t){if(!f.animating&&(f.animating=!0,t?(f.nextslide=t,f.nextindex=t-1):W(e),"fade"===n.animtype&&(n.showmarkers&&(o.removeClass("active-marker"),o.eq(f.nextindex).addClass("active-marker")),s.eq(f.currentindex).fadeOut(n.animduration),s.eq(f.nextindex).fadeIn(n.animduration,function(){f.animating=!1,f.currentslide=f.nextslide,f.currentindex=f.nextindex})),"slide"===n.animtype)){if(n.showmarkers){var i=f.nextindex-1;i===f.slidecount-2?i=0:-1===i&&(i=f.slidecount-3),o.removeClass("active-marker"),o.eq(i).addClass("active-marker")}f.slidewidth=n.responsive&&p.width<n.width?p.width:n.width,h.animate({left:-f.nextindex*f.slidewidth},n.animduration,function(){f.currentslide=f.nextslide,f.currentindex=f.nextindex,"last"===s.eq(f.currentindex).attr("data-clone")?(h.css({left:-f.slidewidth}),f.currentslide=2,f.currentindex=1):"first"===s.eq(f.currentindex).attr("data-clone")&&(h.css({left:-f.slidewidth*(f.slidecount-2)}),f.currentslide=f.slidecount-1,f.currentindex=f.slidecount-2),f.animating=!1})}};v()}}(jQuery);