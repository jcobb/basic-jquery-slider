/*
 * Basic jQuery Slider plug-in v.1.3
 *
 * http://www.basic-slider.com
 *
 * Authored by John Cobb
 * http://www.johncobb.name
 * @john0514
 *
 * Copyright 2011, John Cobb
 * License: GNU General Public License, version 3 (GPL-3.0)
 * http://www.opensource.org/licenses/gpl-3.0.html
 *
 */(function(a){"use strict";a.fn.bjqs=function(b){var c={width:700,height:300,animtype:"fade",animduration:450,animspeed:4e3,automatic:!0,showcontrols:!0,centercontrols:!0,nexttext:"Next",prevtext:"Prev",showmarkers:!0,centermarkers:!0,keyboardnav:!0,hoverpause:!0,usecaptions:!0,randomstart:!1,responsive:!1},d=a.extend({},c,b),e=this,f=e.find("ul.bjqs"),g=f.children("li"),h=null,i=null,j=null,k=null,l=null,m=null,n=null,o=null,p={slidecount:g.length,animating:!1,paused:!1,currentslide:1,nextslide:0,currentindex:0,nextindex:0,interval:null},q={width:null,height:null,ratio:null},r={fwd:"forward",prev:"previous"},s=function(){g.addClass("bjqs-slide"),d.responsive?t():v(),p.slidecount>1?(d.randomstart&&C(),d.showcontrols&&x(),d.showmarkers&&y(),d.keyboardnav&&z(),d.hoverpause&&d.automatic&&A(),"slide"===d.animtype&&w()):d.automatic=!1,d.usecaptions&&B(),"slide"!==d.animtype||d.randomstart||(p.currentindex=1,p.currentslide=2),f.show(),g.eq(p.currentindex).show(),d.automatic&&(p.interval=setInterval(function(){E(r.fwd,!1)},d.animspeed))},t=function(){q.width=e.outerWidth(),q.ratio=q.width/d.width,q.height=d.height*q.ratio,"fade"===d.animtype&&(g.css({height:d.height,width:"100%"}),g.children("img").css({height:d.height,width:"100%"}),f.css({height:d.height,width:"100%"}),e.css({height:d.height,"max-width":d.width,position:"relative"}),q.width<d.width&&(g.css({height:q.height}),g.children("img").css({height:q.height}),f.css({height:q.height}),e.css({height:q.height})),a(window).resize(function(){q.width=e.outerWidth(),q.ratio=q.width/d.width,q.height=d.height*q.ratio,g.css({height:q.height}),g.children("img").css({height:q.height}),f.css({height:q.height}),e.css({height:q.height})})),"slide"===d.animtype&&(g.css({height:d.height,width:d.width}),g.children("img").css({height:d.height,width:d.width}),f.css({height:d.height,width:d.width*d.slidecount}),e.css({height:d.height,"max-width":d.width,position:"relative"}),q.width<d.width&&(g.css({height:q.height}),g.children("img").css({height:q.height}),f.css({height:q.height}),e.css({height:q.height})),a(window).resize(function(){q.width=e.outerWidth(),q.ratio=q.width/d.width,q.height=d.height*q.ratio,g.css({height:q.height,width:q.width}),g.children("img").css({height:q.height,width:q.width}),f.css({height:q.height,width:q.width*d.slidecount}),e.css({height:q.height}),null!==m&&m.css({height:q.height,width:q.width}),u(function(){E(!1,p.currentslide)},200,"some unique string")}))},u=function(){var a={};return function(b,c,d){d||(d="Don't call this twice without a uniqueId"),a[d]&&clearTimeout(a[d]),a[d]=setTimeout(b,c)}}(),v=function(){g.css({height:d.height,width:d.width}),f.css({height:d.height,width:d.width}),e.css({height:d.height,width:d.width,position:"relative"})},w=function(){n=g.eq(0).clone(),o=g.eq(p.slidecount-1).clone(),n.attr({"data-clone":"last","data-slide":0}).appendTo(f).show(),o.attr({"data-clone":"first","data-slide":0}).prependTo(f).show(),g=f.children("li"),p.slidecount=g.length,m=a('<div class="bjqs-wrapper"></div>'),d.responsive&&q.width<d.width?(m.css({width:q.width,height:q.height,overflow:"hidden",position:"relative"}),f.css({width:q.width*(p.slidecount+2),left:-q.width*p.currentslide})):(m.css({width:d.width,height:d.height,overflow:"hidden",position:"relative"}),f.css({width:d.width*(p.slidecount+2),left:-d.width*p.currentslide})),g.css({"float":"left",position:"relative",display:"list-item"}),m.prependTo(e),f.appendTo(m)},x=function(){if(h=a('<ul class="bjqs-controls"></ul>'),i=a('<li class="bjqs-next"><a href="#" data-direction="'+r.fwd+'">'+d.nexttext+"</a></li>"),j=a('<li class="bjqs-prev"><a href="#" data-direction="'+r.prev+'">'+d.prevtext+"</a></li>"),h.on("click","a",function(b){b.preventDefault();var c=a(this).attr("data-direction");p.animating||(c===r.fwd&&E(r.fwd,!1),c===r.prev&&E(r.prev,!1))}),j.appendTo(h),i.appendTo(h),h.appendTo(e),d.centercontrols){h.addClass("v-centered");var b=(e.height()-i.children("a").outerHeight())/2,c=100*(b/d.height),f=c+"%";i.find("a").css("top",f),j.find("a").css("top",f)}},y=function(){if(k=a('<ol class="bjqs-markers"></ol>'),a.each(g,function(b){var e=b+1,f=b+1;"slide"===d.animtype&&(f=b+2);var g=a('<li><a href="#">'+e+"</a></li>");e===p.currentslide&&g.addClass("active-marker"),g.on("click","a",function(a){a.preventDefault(),p.animating||p.currentslide===f||E(!1,f)}),g.appendTo(k)}),k.appendTo(e),l=k.find("li"),d.centermarkers){k.addClass("h-centered");var b=(d.width-k.width())/2;k.css("left",b)}},z=function(){a(document).keyup(function(a){p.paused||(clearInterval(p.interval),p.paused=!0),p.animating||(39===a.keyCode?(a.preventDefault(),E(r.fwd,!1)):37===a.keyCode&&(a.preventDefault(),E(r.prev,!1))),p.paused&&d.automatic&&(p.interval=setInterval(function(){E(r.fwd)},d.animspeed),p.paused=!1)})},A=function(){e.hover(function(){p.paused||(clearInterval(p.interval),p.paused=!0)},function(){p.paused&&(p.interval=setInterval(function(){E(r.fwd,!1)},d.animspeed),p.paused=!1)})},B=function(){a.each(g,function(b,c){var d=a(c).children("img:first-child").attr("title");d||(d=a(c).children("a").find("img:first-child").attr("title")),d&&(d=a('<p class="bjqs-caption">'+d+"</p>"),d.appendTo(a(c)))})},C=function(){var a=Math.floor(Math.random()*p.slidecount)+1;p.currentslide=a,p.currentindex=a-1},D=function(a){a===r.fwd?g.eq(p.currentindex).next().length?(p.nextindex=p.currentindex+1,p.nextslide=p.currentslide+1):(p.nextindex=0,p.nextslide=1):g.eq(p.currentindex).prev().length?(p.nextindex=p.currentindex-1,p.nextslide=p.currentslide-1):(p.nextindex=p.slidecount-1,p.nextslide=p.slidecount)},E=function(a,b){if(!p.animating&&(p.animating=!0,b?(p.nextslide=b,p.nextindex=b-1):D(a),"fade"===d.animtype&&(d.showmarkers&&(l.removeClass("active-marker"),l.eq(p.nextindex).addClass("active-marker")),g.eq(p.currentindex).fadeOut(d.animduration),g.eq(p.nextindex).fadeIn(d.animduration,function(){p.animating=!1,p.currentslide=p.nextslide,p.currentindex=p.nextindex})),"slide"===d.animtype)){if(d.showmarkers){var c=p.nextindex-1;c===p.slidecount-2?c=0:-1===c&&(c=p.slidecount-3),null!==l&&(l.removeClass("active-marker"),l.eq(c).addClass("active-marker"))}p.slidewidth=d.responsive&&q.width<d.width?q.width:d.width,f.animate({left:-p.nextindex*p.slidewidth},d.animduration,function(){p.currentslide=p.nextslide,p.currentindex=p.nextindex,"last"===g.eq(p.currentindex).attr("data-clone")?(f.css({left:-p.slidewidth}),p.currentslide=2,p.currentindex=1):"first"===g.eq(p.currentindex).attr("data-clone")&&(f.css({left:-p.slidewidth*(p.slidecount-2)}),p.currentslide=p.slidecount-1,p.currentindex=p.slidecount-2),p.animating=!1})}};s()}})(jQuery);